Kubernetes介绍
-----------------------

如今，大型单体应用正被逐渐分解成小的、可独立运行的组件（我们称之为**微服务**）。微服务彼此之间解耦，所以它们可以被独立开发、部署、升级、伸缩。这使得我们可以对每一个微服务实现快速迭代，并且迭代的速度可以和市场需求的变化相匹配。

随着部署组件的增加和数据中心的增长，配置和管理并保持系统的正常运行变得越来越困难。我们想降低硬件成本并获得足够高的资源利用率正变得越来越困难。

而这正是Kubernetes在做的，Kubernetes可以进行自动化的调度、配置、监管和故障处理。Kubernetes使开发者能完全脱离运维团队的帮助自主部署应用，并且控制部署的频率。而运维团队可以通过Kubernetes监控整个系统，并且在硬件故障时重新调度应用。

Kubernetes通过对实际硬件做抽象，然后将自身暴露成一个平台用于部署和运行应用程序。它允许开发者自己配置和部署应用程序，而不需要系统管理员的任何帮助。让系统管理员聚焦于保持底层基础设施运转正常的同时，不需要关注实际运行在平台的应用程序。

### Kubernetes系统的需求

Kubernetes一方面需要适应因为应用部署的变化而出现的环境需求的差异，另一方面是需要适应应用的基础架构（环境和依赖）的变化。

#### 应用开发部署的变化

对于单体应用来说，即使是某个组件中小的修改，都需要重新部署整个应用。组件之间缺乏严格的边界定义，组件之间相互依赖。日积月累下来导致系统复杂度提升，整体质量也急剧恶化。

这些问题迫使我们将复杂的大型单体应用拆分为小的可独立部署的微服务组件。每个微服务以独立的进程运行，并通过**简单且定义良好**的接口与其他服务通信。

##### 单体应用和微服务应用的扩容对比

因为每个微服务都是独立的进程，只要API不变或者保持向前兼容，那么我们并不需要对其他微服务进行改动或者重新部署。

面向单体系统，扩容针对的是整个系统。而对于微服务架构，扩容只需要针对单个服务，这意味着我们可以选择性的扩容需要更多资源微服务，而其他微服务了仍然保持原样。

##### 部署微服务

微服务在组件数量增多的时候，也暴露了一些缺点，部署相关的决定会变得越来越困难（应用的组合变多，应用间依赖的组合更以几何倍数变多）。

##### 环境需求的差异

因为微服务架构中的组件不仅是独立部署，也是在独立开发。正是因为这种独立性，不同的组件使用不同的环境和依赖是非常常见的事情。在生产服务器部署并管理这种应用简直就是运维的噩梦。

#### 为应用程序提供一个一致的环境

开发和运维团队需要解决的最大的一个问题是程序运行环境的差异性，这种差异性存在于从硬件到操作系统再到没太机器的动态链接库上。为了解决这个问题，最理想的做法是让应用在开发和生产环境运行在完全一样的环境下（一样的操作系统、动态库、系统配置、网络环境和其他所有的条件）。

#### 持续交付：DevOps

让一个团队参与应用的开发、部署、运维的整个生命周期可以让开发者、QA和运维团队彼此之间的合作贯穿整个流程。这种实践被称为DevOps。

##### 带来的优点

这种实践可以让开发者更多地在生产环境中运行应用，并更多的理解用户的需求和问题，以及运维团队维护应用所面临的困难。

##### 让开发者和系统管理员做他们最擅长的

让开发者创造性的功能和提升用户体验，让运维团队负责管理生产部署流程以及应用所在的硬件设备。

