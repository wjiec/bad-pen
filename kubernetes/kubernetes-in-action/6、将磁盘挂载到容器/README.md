卷：将磁盘挂载到容器
-------------------------------

Pod类似于逻辑主机，逻辑主机中运行的程序共享CPU、内存、网络接口等资源，但是**Pod中的每个容器都有自己独立的文件系统**（文件系统来自于容器镜像）。

当需要容器之间需要共享某些数据时，可以使用Kubernetes的卷（Volume）来满足这个需求。卷不像Pod这样的一等公民，它们作为Pod的一部分存在，并和Pod共享相同的生命周期。



### 介绍卷

**Kubernetes卷是Pod的一个组成部分**（在Pod的规范中定义），它们不能单独创建或删除。Pod中的让所有容器都可以使用卷，但**必须先将卷挂载到需要访问的容器中**（可以在文件系统的任务位置挂载卷）。

卷要么从外部资源初始化时填充，要么是在卷内挂载现有目录，要么就是一个空目录。这个填充或装入卷的过程是在Pod内容器启动之前完成的。卷被绑定到Pod的生命周期中，卷只有Pod存在时才会存在，但是根据卷类型，即时Pod和卷销毁之后，卷的文件也可能被持久化在某一个地方并不会被销毁。

卷有多种类型可供选择，其中一些是通用的，也有一些是相对于当前常用的存储技术有较大差别的

* `emptyDir`：用于存储临时数据的空目录（在多个容器之间共享文件）
* `hostPath`：将目录从工作节点的文件系统挂载到Pod中
* `gitRepo`：通过检出Git仓库的内容来初始化的卷
* `nfs`：通过NFS协议挂载的共享卷
* `awsElasticBlockStore/azureDisk/gcePersistentDisk`：用于挂载云服务商提供的特定存储类型
* `cephfs/vsphere-volume/cinder`：其他类型的网络存储
* `configMap/secret/downwardAPI`：将Kubernetes的部分资源或集群信息作为挂载对象的特殊卷
* `persistentVolumeClain`：一种使用预置或者动态配置的持久存储卷

单个容器可以同时使用不同类型的多个卷，每个容器也可以选择装载或者不装载卷。

