类型推断
-------------

类型推断（Type Inference）是编程语言在编译时自动解释表达式中数据类型的能力。类型推断的优势主要在于可以省略类型，这使编程变得更加容易。语言支持类型推断有两个主要的优势：

* 一是如果使用得当，那么它可以使代码更易阅读
* 二是如果类型更加复杂，那么类型推断可以减少代码中的冗余信息



### Go 语言中类型推断的特性

Go 语言的目标是减少在其他静态类型语言中存在的混乱情况，因此在设计 Go 语言时，他们对变量使用简单的类型推断，给人以编写动态类型代码的感觉。同时仍然保留静态类型的好处。所以目前 Go 语言的额类型推断目前还相对简单，没有涵盖参数和发挥值之类的内容。



### 类型推断原理

类型推断依赖编译器的处理能力



#### 词法解析和语法分析阶段

在词法解析阶段，会将赋值语句右边的常量解析为一个未定义的类型，例如 `ImagLit` 表示复数，`FloatLit` 表示浮点数，而 `IntLit` 表示整数。



#### 抽象语法树生成与类型检查

在该阶段会将词法解析阶段生成的 `AssignStmt` 结构解析为一个 `Node`（对抽象语法树中节点的抽象）。

> 在编译时抽象语法树阶段通过 math/big.Int 进行高精度存储，浮点数则通过 math/big.Float 进行高精度存储。
>
> 在 SSA（静态单赋值）阶段，变量中存储的大数类型的值最终会调用 math/big.Int,Float 包中的 int64,float32,float64 等方法将其转换为对应类型的常量。

