深入协程设计与调度原理
-----------------------------------

Go 语言轻量级的协程借助运行时的调度。



### 协程的生命周期与状态转移

协程并不只有创建和死亡两种状态，为了便于对协程进行管理，Go 语言的调度器将协程分为多种状态。

![Go 语言调度器与Goroutine 实现原理| Go 语言设计与实现](./goroutine-states.png)

Copyright: Go 语言调度器与Goroutine 实现原理| Go 语言设计与实现

* Gidle 为协程刚创建时的状态，当新创建的协程初始化后，会变为 Gdead 状态，这个状态同时也是协程被销毁时的状态
* Grunnable 表示当前协程在运行队列中，正在正待运行
* Grunning 代表当前协程正在运行中，已经分配给逻辑处理器和逻辑线程
* Gwaiting 表示当前协程在运行时被锁定，不能执行用户代码。在垃圾回收以及 channel 通信时经常会遇到这种情况
* Gsyscall 表示当前协程正在执行系统调用
* Gcopystack 表示当前协程在进行栈扫描时发现需要扩容或缩小栈，将协程中的栈转移到新栈时的状态



### 特殊协程 g0 与协程切换

